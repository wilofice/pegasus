2025-07-20 15:39:26,467 - __main__ - INFO - Starting Pegasus Brain Celery worker...
 
 -------------- celery@mac-1.home v5.5.3 (immunity)
--- ***** ----- 
-- ******* ---- macOS-15.5-arm64-arm-64bit 2025-07-20 15:39:31
- *** --- * --- 
- ** ---------- [config]
- ** ---------- .> app:         pegasus_brain:0x10437ba90
- ** ---------- .> transport:   redis://localhost:6379/0
- ** ---------- .> results:     postgresql://pegasus_user:**@localhost:5432/pegasus_db
- *** --- * --- .> concurrency: 2 (solo)
-- ******* ---- .> task events: ON
--- ***** ----- 
 -------------- [queues]
                .> default          exchange=default(direct) key=default
                .> entity_extraction exchange=nlp(direct) key=nlp.entities
                .> graph_building   exchange=indexing(direct) key=indexing.graph
                .> plugin_execution exchange=plugins(direct) key=plugin.execute
                .> transcript_processing exchange=transcript(direct) key=transcript.processing
                .> vector_indexing  exchange=indexing(direct) key=indexing.vector

[tasks]
  . workers.celery_app.health_check
  . workers.tasks.conversation_processing_tasks.process_conversation_history
  . workers.tasks.plugin_executor.execute_plugins_for_transcript
  . workers.tasks.plugin_executor.execute_single_plugin
  . workers.tasks.plugin_executor.get_plugin_status
  . workers.tasks.plugin_executor.reload_plugin
  . workers.tasks.transcript_processor.process_knowledge_base
  . workers.tasks.transcript_processor.process_transcript
  . workers.tasks.transcript_processor.reprocess_transcript
  . workers.tasks.transcription_tasks.transcribe_audio

2025-07-20 15:39:31,732 - celery.worker.consumer.connection - INFO - Connected to redis://localhost:6379/0
2025-07-20 15:39:31,743 - workers.celery_app - INFO - Celery worker celery@mac-1.home is ready
2025-07-20 15:39:31,743 - celery.apps.worker - INFO - celery@mac-1.home ready.
2025-07-20 15:39:37,989 - celery.worker.strategy - INFO - Task workers.tasks.transcription_tasks.transcribe_audio[be00aad2-205c-4fa8-bd15-269409378454] received
2025-07-20 15:39:37,989 - workers.celery_app - INFO - Starting task workers.tasks.transcription_tasks.transcribe_audio [be00aad2-205c-4fa8-bd15-269409378454]
2025-07-20 15:39:38,037 - services.neo4j_client - INFO - Successfully connected to Neo4j at bolt://localhost:7687
2025-07-20 15:39:38,044 - neo4j.notifications - INFO - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE CONSTRAINT person_name IF NOT EXISTS FOR (e:Person) REQUIRE (e.name) IS UNIQUE` has no effect.} {description: `CONSTRAINT person_name FOR (e:Person) REQUIRE (e.name) IS UNIQUE` already exists.} {position: None} for query: 'CREATE CONSTRAINT person_name IF NOT EXISTS FOR (p:Person) REQUIRE p.name IS UNIQUE'
2025-07-20 15:39:38,046 - services.neo4j_client - INFO - Created constraint: CREATE CONSTRAINT person_name IF NOT EXISTS
2025-07-20 15:39:38,050 - neo4j.notifications - INFO - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE CONSTRAINT location_name IF NOT EXISTS FOR (e:Location) REQUIRE (e.name) IS UNIQUE` has no effect.} {description: `CONSTRAINT location_name FOR (e:Location) REQUIRE (e.name) IS UNIQUE` already exists.} {position: None} for query: 'CREATE CONSTRAINT location_name IF NOT EXISTS FOR (l:Location) REQUIRE l.name IS UNIQUE'
2025-07-20 15:39:38,051 - services.neo4j_client - INFO - Created constraint: CREATE CONSTRAINT location_name IF NOT EXISTS
2025-07-20 15:39:38,054 - neo4j.notifications - INFO - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE CONSTRAINT organization_name IF NOT EXISTS FOR (e:Organization) REQUIRE (e.name) IS UNIQUE` has no effect.} {description: `CONSTRAINT organization_name FOR (e:Organization) REQUIRE (e.name) IS UNIQUE` already exists.} {position: None} for query: 'CREATE CONSTRAINT organization_name IF NOT EXISTS FOR (o:Organization) REQUIRE o.name IS UNIQUE'
2025-07-20 15:39:38,058 - services.neo4j_client - INFO - Created constraint: CREATE CONSTRAINT organization_name IF NOT EXISTS
2025-07-20 15:39:38,062 - neo4j.notifications - INFO - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE CONSTRAINT topic_name IF NOT EXISTS FOR (e:Topic) REQUIRE (e.name) IS UNIQUE` has no effect.} {description: `CONSTRAINT topic_name FOR (e:Topic) REQUIRE (e.name) IS UNIQUE` already exists.} {position: None} for query: 'CREATE CONSTRAINT topic_name IF NOT EXISTS FOR (t:Topic) REQUIRE t.name IS UNIQUE'
2025-07-20 15:39:38,063 - services.neo4j_client - INFO - Created constraint: CREATE CONSTRAINT topic_name IF NOT EXISTS
2025-07-20 15:39:38,066 - neo4j.notifications - INFO - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE CONSTRAINT project_name IF NOT EXISTS FOR (e:Project) REQUIRE (e.name) IS UNIQUE` has no effect.} {description: `CONSTRAINT project_name FOR (e:Project) REQUIRE (e.name) IS UNIQUE` already exists.} {position: None} for query: 'CREATE CONSTRAINT project_name IF NOT EXISTS FOR (p:Project) REQUIRE p.name IS UNIQUE'
2025-07-20 15:39:38,067 - services.neo4j_client - INFO - Created constraint: CREATE CONSTRAINT project_name IF NOT EXISTS
2025-07-20 15:39:38,070 - neo4j.notifications - INFO - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE CONSTRAINT entity_id IF NOT EXISTS FOR (e:Entity) REQUIRE (e.id) IS UNIQUE` has no effect.} {description: `CONSTRAINT entity_id FOR (e:Entity) REQUIRE (e.id) IS UNIQUE` already exists.} {position: None} for query: 'CREATE CONSTRAINT entity_id IF NOT EXISTS FOR (e:Entity) REQUIRE e.id IS UNIQUE'
2025-07-20 15:39:38,071 - services.neo4j_client - INFO - Created constraint: CREATE CONSTRAINT entity_id IF NOT EXISTS
2025-07-20 15:39:38,074 - neo4j.notifications - INFO - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE CONSTRAINT entity_normalized_name IF NOT EXISTS FOR (e:Entity) REQUIRE (e.normalized_name) IS UNIQUE` has no effect.} {description: `CONSTRAINT entity_normalized_name FOR (e:Entity) REQUIRE (e.normalized_name) IS UNIQUE` already exists.} {position: None} for query: 'CREATE CONSTRAINT entity_normalized_name IF NOT EXISTS FOR (e:Entity) REQUIRE e.normalized_name IS UNIQUE'
2025-07-20 15:39:38,075 - services.neo4j_client - INFO - Created constraint: CREATE CONSTRAINT entity_normalized_name IF NOT EXISTS
2025-07-20 15:39:38,078 - neo4j.notifications - INFO - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE CONSTRAINT chunk_id IF NOT EXISTS FOR (e:AudioChunk) REQUIRE (e.id) IS UNIQUE` has no effect.} {description: `CONSTRAINT chunk_id FOR (e:AudioChunk) REQUIRE (e.id) IS UNIQUE` already exists.} {position: None} for query: 'CREATE CONSTRAINT chunk_id IF NOT EXISTS FOR (c:AudioChunk) REQUIRE c.id IS UNIQUE'
2025-07-20 15:39:38,079 - services.neo4j_client - INFO - Created constraint: CREATE CONSTRAINT chunk_id IF NOT EXISTS
2025-07-20 15:39:38,082 - neo4j.notifications - INFO - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE CONSTRAINT user_id IF NOT EXISTS FOR (e:User) REQUIRE (e.id) IS UNIQUE` has no effect.} {description: `CONSTRAINT user_id FOR (e:User) REQUIRE (e.id) IS UNIQUE` already exists.} {position: None} for query: 'CREATE CONSTRAINT user_id IF NOT EXISTS FOR (u:User) REQUIRE u.id IS UNIQUE'
2025-07-20 15:39:38,083 - services.neo4j_client - INFO - Created constraint: CREATE CONSTRAINT user_id IF NOT EXISTS
2025-07-20 15:39:38,086 - neo4j.notifications - INFO - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE RANGE INDEX audio_chunk_text IF NOT EXISTS FOR (e:AudioChunk) ON (e.text)` has no effect.} {description: `RANGE INDEX audio_chunk_text FOR (e:AudioChunk) ON (e.text)` already exists.} {position: None} for query: 'CREATE INDEX audio_chunk_text IF NOT EXISTS FOR (c:AudioChunk) ON (c.text)'
2025-07-20 15:39:38,086 - services.neo4j_client - INFO - Created index: CREATE INDEX audio_chunk_text IF NOT EXISTS
2025-07-20 15:39:38,090 - neo4j.notifications - INFO - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE RANGE INDEX entity_mentions IF NOT EXISTS FOR (e:Entity) ON (e.mention_count)` has no effect.} {description: `RANGE INDEX entity_mentions FOR (e:Entity) ON (e.mention_count)` already exists.} {position: None} for query: 'CREATE INDEX entity_mentions IF NOT EXISTS FOR (e:Entity) ON (e.mention_count)'
2025-07-20 15:39:38,090 - services.neo4j_client - INFO - Created index: CREATE INDEX entity_mentions IF NOT EXISTS
2025-07-20 15:39:38,095 - neo4j.notifications - INFO - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE RANGE INDEX chunk_timestamp IF NOT EXISTS FOR (e:AudioChunk) ON (e.timestamp)` has no effect.} {description: `RANGE INDEX chunk_timestamp FOR (e:AudioChunk) ON (e.timestamp)` already exists.} {position: None} for query: 'CREATE INDEX chunk_timestamp IF NOT EXISTS FOR (c:AudioChunk) ON (c.timestamp)'
2025-07-20 15:39:38,096 - services.neo4j_client - INFO - Created index: CREATE INDEX chunk_timestamp IF NOT EXISTS
2025-07-20 15:39:38,099 - neo4j.notifications - INFO - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE RANGE INDEX chunk_date IF NOT EXISTS FOR (e:AudioChunk) ON (e.date)` has no effect.} {description: `RANGE INDEX chunk_date FOR (e:AudioChunk) ON (e.date)` already exists.} {position: None} for query: 'CREATE INDEX chunk_date IF NOT EXISTS FOR (c:AudioChunk) ON (c.date)'
2025-07-20 15:39:38,100 - services.neo4j_client - INFO - Created index: CREATE INDEX chunk_date IF NOT EXISTS
2025-07-20 15:39:38,104 - neo4j.notifications - INFO - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE RANGE INDEX chunk_user_id IF NOT EXISTS FOR (e:AudioChunk) ON (e.user_id)` has no effect.} {description: `RANGE INDEX chunk_user_id FOR (e:AudioChunk) ON (e.user_id)` already exists.} {position: None} for query: 'CREATE INDEX chunk_user_id IF NOT EXISTS FOR (c:AudioChunk) ON (c.user_id)'
2025-07-20 15:39:38,104 - services.neo4j_client - INFO - Created index: CREATE INDEX chunk_user_id IF NOT EXISTS
2025-07-20 15:39:38,108 - neo4j.notifications - INFO - Received notification from DBMS server: {severity: INFORMATION} {code: Neo.ClientNotification.Schema.IndexOrConstraintAlreadyExists} {category: SCHEMA} {title: `CREATE RANGE INDEX entity_user_id IF NOT EXISTS FOR (e:Entity) ON (e.user_id)` has no effect.} {description: `RANGE INDEX entity_user_id FOR (e:Entity) ON (e.user_id)` already exists.} {position: None} for query: 'CREATE INDEX entity_user_id IF NOT EXISTS FOR (e:Entity) ON (e.user_id)'
2025-07-20 15:39:38,109 - services.neo4j_client - INFO - Created index: CREATE INDEX entity_user_id IF NOT EXISTS
2025-07-20 15:39:38,177 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-07-20 15:39:38,178 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-07-20 15:39:38,178 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-07-20 15:39:40,806 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-07-20 15:39:40,941 - httpx - INFO - HTTP Request: PUT http://localhost:6333/collections/pegasus_transcripts "HTTP/1.1 200 OK"
2025-07-20 15:39:40,942 - services.qdrant_manager - INFO - Created Qdrant collection: pegasus_transcripts
2025-07-20 15:39:40,942 - services.qdrant_db_client - INFO - Connected to Qdrant at localhost:6333
2025-07-20 15:39:41,240 - services.ner_service - INFO - Loaded spaCy model for en: en_core_web_sm
2025-07-20 15:39:41,756 - services.ner_service - INFO - Loaded spaCy model for fr: fr_core_news_sm
2025-07-20 15:39:41,756 - services.neo4j_document_ingestion - INFO - Neo4j Document Ingestion service initialized
2025-07-20 15:39:41,792 - repositories.job_repository - INFO - Updated job 12b530a7-cfaa-4481-93b8-059c6ecd8ee9 status: JobStatus.PENDING -> JobStatus.PROCESSING
2025-07-20 15:39:41,792 - workers.base_task - INFO - Task be00aad2-205c-4fa8-bd15-269409378454 initialized successfully
2025-07-20 15:39:41,792 - workers.base_task - INFO - Progress: 1/3 (33.3%) - Starting transcription
2025-07-20 15:39:41,848 - services.transcription_service - INFO - Transcribing audio_files/2025/07/20/audio_20250720_153937_65c47f51.m4a with whisper
2025-07-20 15:39:41,848 - celery.redirected - WARNING - Using device for whisper: mps
2025-07-20 15:39:41,849 - services.transcription_service - INFO - Loading Whisper model: medium
2025-07-20 15:39:47,408 - py.warnings - WARNING - /Users/genereux/Dev/pegasus/backend/.venv/lib/python3.11/site-packages/whisper/transcribe.py:132: UserWarning: FP16 is not supported on CPU; using FP32 instead
  warnings.warn("FP16 is not supported on CPU; using FP32 instead")

2025-07-20 15:39:49,703 - celery.redirected - WARNING -   0%|          | 0/1676 [00:00<?, ?frames/s]
2025-07-20 15:39:58,198 - celery.redirected - WARNING - 100%|##########| 1676/1676 [00:08<00:00, 197.32frames/s]
2025-07-20 15:39:58,198 - celery.redirected - WARNING - 100%|##########| 1676/1676 [00:08<00:00, 197.32frames/s]
2025-07-20 15:39:58,334 - workers.base_task - INFO - Progress: 2/3 (66.7%) - Original transcription complete, awaiting transcript improvement
2025-07-20 15:39:58,361 - services.ollama_service - INFO - Improving transcript with Ollama
2025-07-20 15:39:58,426 - httpx - INFO - HTTP Request: GET http://localhost:11434/api/tags "HTTP/1.1 200 OK"
2025-07-20 15:40:12,184 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/generate "HTTP/1.1 200 OK"
2025-07-20 15:40:12,188 - services.ollama_service - INFO - Ollama completion successful: Result: {'model': 'qwen3:1.7b', 'created_at': '2025-07-20T13:40:12.150709Z', 'response': 'Hello. Okay, today, today is a Sunday. I spent a lot of time with my family and my friends.', 'thinking': 'Okay, let\'s take a look at this transcript. The user wants me to correct any spelling or grammar mistakes. First, I\'ll read through the text carefully.\n\nThe first sentence is "Hello. Okay, today, uh, today is a Sunday." The word "uh" is a filler word, which the rules say to remove. So I\'ll take that out. Then, "today, uh, today" repeats "today," which is redundant. I should correct that to "today, today is a Sunday."\n\nNext, the sentence structure: "I spent a lot of time with my family, my friends." The comma after "family" is correct, but maybe adding a period after "friends" would make it clearer. However, the original doesn\'t have a period after "friends," so maybe that\'s okay. Wait, the original has a comma after "family" and then "my friends." Since "friends" is a list, the comma is correct. So perhaps leaving it as is is fine.\n\nChecking for punctuation: The original has a period after "Hello," but the user\'s example doesn\'t have one. Wait, the original text starts with "Hello." So maybe the user\'s example has a period. But in the original provided, the user wrote "Hello. Okay..." So the first sentence ends with a period. So that\'s correct.\n\nOther possible issues: "today, uh, today is a Sunday." The "uh" is removed. Then "today is a Sunday" is correct. The rest of the sentence is fine.\n\nSo the corrected version would be: "Hello. Okay, today, today is a Sunday. I spent a lot of time with my family and my friends."\n\nWait, the original has "my family, my friends." The comma after "family" is correct, but "my friends" is a list, so maybe a comma is needed. However, in the original, it\'s "my family, my friends." So the comma is correct. So the corrected version would keep the comma. But the user\'s example might have a period after "friends," but the original doesn\'t. So maybe it\'s okay as is.\n\nSo the final corrected text would be: "Hello. Okay, today, today is a Sunday. I spent a lot of time with my family and my friends."\n', 'done': True, 'done_reason': 'stop', 'context': [151644, 8948, 271, 2610, 525, 458, 6203, 15235, 389, 42429, 323, 31428, 13, 4615, 3383, 374, 311, 4396, 279, 1467, 1172, 323, 1172, 979, 5871, 13, 358, 1079, 537, 10161, 1128, 498, 1744, 315, 279, 1467, 13866, 421, 498, 1075, 476, 537, 26, 8278, 4396, 279, 42429, 323, 31428, 20643, 26, 715, 8973, 46817, 43797, 50, 481, 29668, 1930, 21792, 27915, 9183, 7910, 3596, 63756, 510, 16, 13, 220, 39970, 8036, 1467, 5975, 320, 41094, 8, 323, 13580, 966, 624, 17, 13, 220, 2691, 6169, 61503, 323, 6722, 2022, 198, 18, 13, 220, 15623, 1467, 1119, 19819, 42643, 421, 432, 646, 12434, 803, 38975, 311, 279, 1467, 198, 19, 13, 220, 55025, 2297, 279, 7290, 476, 912, 697, 1828, 22845, 476, 7274, 13, 358, 1513, 944, 2453, 911, 429, 26, 39970, 279, 1467, 323, 4675, 432, 438, 697, 2550, 13, 2691, 4302, 803, 280, 20, 256, 55025, 912, 4137, 4244, 11, 31747, 11, 476, 2213, 537, 304, 279, 4024, 13, 4320, 944, 912, 697, 7274, 1882, 476, 6358, 2987, 624, 21, 13, 220, 55025, 912, 7102, 11, 15311, 11, 68922, 11, 476, 40841, 13, 55025, 198, 22, 13, 220, 55025, 912, 61369, 31747, 1075, 330, 8420, 594, 279, 12944, 35715, 2974, 476, 4113, 4428, 715, 23, 13, 220, 10783, 54710, 4244, 320, 372, 11, 43744, 11, 2714, 8, 481, 4302, 770, 198, 24, 13, 220, 4615, 2033, 27732, 6644, 26687, 279, 12944, 1467, 13, 2303, 4416, 308, 2836, 308, 2836, 912, 4113, 770, 1573, 476, 1283, 279, 35715, 5086, 624, 16, 15, 13, 1446, 525, 5420, 311, 5602, 279, 1467, 1172, 311, 912, 57323, 311, 279, 7290, 315, 279, 1467, 624, 16, 15, 13, 1416, 498, 912, 4137, 56664, 7797, 279, 7290, 315, 279, 4024, 1467, 11, 697, 2033, 686, 387, 17551, 271, 67783, 37439, 4769, 26687, 3168, 26465, 44840, 1479, 15762, 13, 5664, 15814, 87938, 15762, 91892, 56482, 2726, 48264, 3168, 21116, 16383, 40347, 24787, 25, 151645, 198, 151644, 872, 198, 18395, 35715, 1447, 21927, 13, 35439, 11, 3351, 11, 43744, 11, 3351, 374, 264, 7270, 13, 358, 7391, 264, 2696, 315, 882, 448, 847, 2997, 11, 847, 4780, 13, 608, 26865, 151645, 198, 151644, 77091, 198, 151667, 198, 32313, 11, 1077, 594, 1896, 264, 1401, 518, 419, 35715, 13, 576, 1196, 6801, 752, 311, 4396, 894, 42429, 476, 31428, 20643, 13, 5512, 11, 358, 3278, 1349, 1526, 279, 1467, 15516, 382, 785, 1156, 11652, 374, 330, 9707, 13, 35439, 11, 3351, 11, 43744, 11, 3351, 374, 264, 7270, 1189, 576, 3409, 330, 12540, 1, 374, 264, 54710, 3409, 11, 892, 279, 5601, 1977, 311, 4057, 13, 2055, 358, 3278, 1896, 429, 700, 13, 5005, 11, 330, 30113, 11, 43744, 11, 3351, 1, 43594, 330, 30113, 1335, 892, 374, 47732, 13, 358, 1265, 4396, 429, 311, 330, 30113, 11, 3351, 374, 264, 7270, 2217, 5847, 11, 279, 11652, 5944, 25, 330, 40, 7391, 264, 2696, 315, 882, 448, 847, 2997, 11, 847, 4780, 1189, 576, 31683, 1283, 330, 18984, 1, 374, 4396, 11, 714, 7196, 7842, 264, 4168, 1283, 330, 29462, 1, 1035, 1281, 432, 48379, 13, 4354, 11, 279, 4024, 3171, 944, 614, 264, 4168, 1283, 330, 29462, 1335, 773, 7196, 429, 594, 16910, 13, 13824, 11, 279, 4024, 702, 264, 31683, 1283, 330, 18984, 1, 323, 1221, 330, 2408, 4780, 1189, 8704, 330, 29462, 1, 374, 264, 1140, 11, 279, 31683, 374, 4396, 13, 2055, 8365, 9380, 432, 438, 374, 374, 6915, 382, 40129, 369, 61503, 25, 576, 4024, 702, 264, 4168, 1283, 330, 9707, 1335, 714, 279, 1196, 594, 3110, 3171, 944, 614, 825, 13, 13824, 11, 279, 4024, 1467, 8471, 448, 330, 9707, 1189, 2055, 7196, 279, 1196, 594, 3110, 702, 264, 4168, 13, 1988, 304, 279, 4024, 3897, 11, 279, 1196, 6139, 330, 9707, 13, 35439, 21215, 2055, 279, 1156, 11652, 10335, 448, 264, 4168, 13, 2055, 429, 594, 4396, 382, 11409, 3204, 4714, 25, 330, 30113, 11, 43744, 11, 3351, 374, 264, 7270, 1189, 576, 330, 12540, 1, 374, 6963, 13, 5005, 330, 30113, 374, 264, 7270, 1, 374, 4396, 13, 576, 2732, 315, 279, 11652, 374, 6915, 382, 4416, 279, 35965, 2319, 1035, 387, 25, 330, 9707, 13, 35439, 11, 3351, 11, 3351, 374, 264, 7270, 13, 358, 7391, 264, 2696, 315, 882, 448, 847, 2997, 323, 847, 4780, 2217, 14190, 11, 279, 4024, 702, 330, 2408, 2997, 11, 847, 4780, 1189, 576, 31683, 1283, 330, 18984, 1, 374, 4396, 11, 714, 330, 2408, 4780, 1, 374, 264, 1140, 11, 773, 7196, 264, 31683, 374, 4362, 13, 4354, 11, 304, 279, 4024, 11, 432, 594, 330, 2408, 2997, 11, 847, 4780, 1189, 2055, 279, 31683, 374, 4396, 13, 2055, 279, 35965, 2319, 1035, 2506, 279, 31683, 13, 1988, 279, 1196, 594, 3110, 2578, 614, 264, 4168, 1283, 330, 29462, 1335, 714, 279, 4024, 3171, 944, 13, 2055, 7196, 432, 594, 16910, 438, 374, 382, 4416, 279, 1590, 35965, 1467, 1035, 387, 25, 330, 9707, 13, 35439, 11, 3351, 11, 3351, 374, 264, 7270, 13, 358, 7391, 264, 2696, 315, 882, 448, 847, 2997, 323, 847, 4780, 10040, 151668, 271, 9707, 13, 35439, 11, 3351, 11, 3351, 374, 264, 7270, 13, 358, 7391, 264, 2696, 315, 882, 448, 847, 2997, 323, 847, 4780, 13], 'total_duration': 13705497458, 'load_duration': 2252343125, 'prompt_eval_count': 358, 'prompt_eval_duration': 838317000, 'eval_count': 504, 'eval_duration': 10601104000}...
2025-07-20 15:40:12,190 - celery.redirected - WARNING - First part (thinking):
2025-07-20 15:40:12,190 - celery.redirected - WARNING -  
2025-07-20 15:40:12,190 - celery.redirected - WARNING - Okay, let's take a look at this transcript. The user wants me to correct any spelling or grammar mistakes. First, I'll read through the text carefully.

The first sentence is "Hello. Okay, today, uh, today is a Sunday." The word "uh" is a filler word, which the rules say to remove. So I'll take that out. Then, "today, uh, today" repeats "today," which is redundant. I should correct that to "today, today is a Sunday."

Next, the sentence structure: "I spent a lot of time with my family, my friends." The comma after "family" is correct, but maybe adding a period after "friends" would make it clearer. However, the original doesn't have a period after "friends," so maybe that's okay. Wait, the original has a comma after "family" and then "my friends." Since "friends" is a list, the comma is correct. So perhaps leaving it as is is fine.

Checking for punctuation: The original has a period after "Hello," but the user's example doesn't have one. Wait, the original text starts with "Hello." So maybe the user's example has a period. But in the original provided, the user wrote "Hello. Okay..." So the first sentence ends with a period. So that's correct.

Other possible issues: "today, uh, today is a Sunday." The "uh" is removed. Then "today is a Sunday" is correct. The rest of the sentence is fine.

So the corrected version would be: "Hello. Okay, today, today is a Sunday. I spent a lot of time with my family and my friends."

Wait, the original has "my family, my friends." The comma after "family" is correct, but "my friends" is a list, so maybe a comma is needed. However, in the original, it's "my family, my friends." So the comma is correct. So the corrected version would keep the comma. But the user's example might have a period after "friends," but the original doesn't. So maybe it's okay as is.

So the final corrected text would be: "Hello. Okay, today, today is a Sunday. I spent a lot of time with my family and my friends."
2025-07-20 15:40:12,190 - celery.redirected - WARNING - Second part (response):
2025-07-20 15:40:12,190 - celery.redirected - WARNING -  
2025-07-20 15:40:12,190 - celery.redirected - WARNING - Hello. Okay, today, today is a Sunday. I spent a lot of time with my family and my friends.
2025-07-20 15:40:12,248 - workers.base_task - INFO - Progress: 2/3 (66.7%) - Transcription complete, awaiting user review
2025-07-20 15:40:12,856 - celery.app.trace - INFO - Task workers.tasks.transcription_tasks.transcribe_audio[be00aad2-205c-4fa8-bd15-269409378454] succeeded in 34.86609295901144s: {'status': 'success', 'audio_id': '03524c0d-b9b8-4ac2-a050-473d170a4724'}
2025-07-20 15:40:12,865 - repositories.job_repository - INFO - Updated job 12b530a7-cfaa-4481-93b8-059c6ecd8ee9 status: JobStatus.PROCESSING -> JobStatus.COMPLETED
2025-07-20 15:40:12,865 - workers.base_task - INFO - Task be00aad2-205c-4fa8-bd15-269409378454 cleanup completed
2025-07-20 15:40:12,865 - workers.celery_app - INFO - Finished task workers.tasks.transcription_tasks.transcribe_audio [be00aad2-205c-4fa8-bd15-269409378454] with state: SUCCESS
