{"openapi":"3.1.0","info":{"title":"Pegasus Backend","version":"0.1.0"},"paths":{"/chat/":{"post":{"tags":["chat"],"summary":"Chat","description":"Handle chat messages from the frontend.","operationId":"chat_chat__post","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/":{"post":{"tags":["webhook"],"summary":"Webhook","description":"Process notifications from the data pipeline.","operationId":"webhook_webhook__post","parameters":[{"name":"x-token","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Token"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookPayload"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Webhook Webhook  Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/audio/upload":{"post":{"tags":["audio"],"summary":"Upload Audio","description":"Upload an audio file for transcription and processing.\n\nArgs:\n    file: The audio file to upload\n    user_id: Optional user identifier\n    \nReturns:\n    AudioUploadResponse with file ID and status","operationId":"upload_audio_api_audio_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_audio_api_audio_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudioUploadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/audio/{audio_id}":{"get":{"tags":["audio"],"summary":"Get Audio File","description":"Get audio file details by ID.\n\nArgs:\n    audio_id: UUID of the audio file\n    \nReturns:\n    AudioFileResponse with file details","operationId":"get_audio_file_api_audio__audio_id__get","parameters":[{"name":"audio_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Audio Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudioFileResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["audio"],"summary":"Delete Audio File","description":"Delete an audio file and its associated data.\n\nArgs:\n    audio_id: UUID of the audio file to delete\n    \nReturns:\n    Success message","operationId":"delete_audio_file_api_audio__audio_id__delete","parameters":[{"name":"audio_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Audio Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/audio/":{"get":{"tags":["audio"],"summary":"List Audio Files","description":"List audio files with optional filters.\n\nArgs:\n    user_id: Filter by user ID\n    status: Filter by processing status\n    limit: Maximum number of results (default 20)\n    offset: Number of results to skip (default 0)\n    \nReturns:\n    AudioFileListResponse with paginated results","operationId":"list_audio_files_api_audio__get","parameters":[{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/ProcessingStatus"},{"type":"null"}],"title":"Status"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudioFileListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/audio/{audio_id}/download":{"get":{"tags":["audio"],"summary":"Download Audio File","description":"Download the original audio file.\n\nArgs:\n    audio_id: UUID of the audio file\n    \nReturns:\n    FileResponse with the audio file","operationId":"download_audio_file_api_audio__audio_id__download_get","parameters":[{"name":"audio_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Audio Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/audio/{audio_id}/transcript":{"get":{"tags":["audio"],"summary":"Get Transcript","description":"Get the transcript for an audio file.\n\nArgs:\n    audio_id: UUID of the audio file\n    improved: Whether to return improved transcript (default True)\n    \nReturns:\n    Transcript text or status message","operationId":"get_transcript_api_audio__audio_id__transcript_get","parameters":[{"name":"audio_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Audio Id"}},{"name":"improved","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Improved"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"summary":"Health","description":"Simple health check endpoint.","operationId":"health_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Health Health Get"}}}}}}}},"components":{"schemas":{"AudioFileListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/AudioFileResponse"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total","description":"Total number of items"},"limit":{"type":"integer","title":"Limit","description":"Maximum number of items per page"},"offset":{"type":"integer","title":"Offset","description":"Number of items skipped"}},"type":"object","required":["items","total","limit","offset"],"title":"AudioFileListResponse","description":"Response schema for listing audio files."},"AudioFileResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"filename":{"type":"string","title":"Filename"},"original_filename":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Original Filename"},"file_size_bytes":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"File Size Bytes"},"duration_seconds":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Duration Seconds"},"mime_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Mime Type"},"original_transcript":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Original Transcript"},"improved_transcript":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Improved Transcript"},"transcription_engine":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Transcription Engine"},"transcription_started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Transcription Started At"},"transcription_completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Transcription Completed At"},"improvement_completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Improvement Completed At"},"user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"},"upload_timestamp":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Upload Timestamp"},"processing_status":{"$ref":"#/components/schemas/ProcessingStatus"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["id","filename","processing_status"],"title":"AudioFileResponse","description":"Response schema for audio file details."},"AudioUploadResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"filename":{"type":"string","title":"Filename"},"original_filename":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Original Filename"},"file_size_bytes":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"File Size Bytes"},"upload_timestamp":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Upload Timestamp"},"processing_status":{"$ref":"#/components/schemas/ProcessingStatus"},"message":{"type":"string","title":"Message","default":"File uploaded successfully"}},"type":"object","required":["id","filename","processing_status"],"title":"AudioUploadResponse","description":"Response schema for audio file upload."},"Body_upload_audio_api_audio_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"}},"type":"object","required":["file"],"title":"Body_upload_audio_api_audio_upload_post"},"ChatRequest":{"properties":{"message":{"type":"string","title":"Message"}},"type":"object","required":["message"],"title":"ChatRequest"},"ChatResponse":{"properties":{"response":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Response"}},"type":"object","title":"ChatResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ProcessingStatus":{"type":"string","enum":["uploaded","transcribing","improving","completed","failed"],"title":"ProcessingStatus","description":"Audio file processing status."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"WebhookPayload":{"properties":{"file_path":{"type":"string","title":"File Path"}},"type":"object","required":["file_path"],"title":"WebhookPayload"}}}}